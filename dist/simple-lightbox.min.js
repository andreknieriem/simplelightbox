/*
	By Andr√© Rinas, www.andreknieriem.de
	Available for use under the MIT License
*/
(function(b,r,g,N){b.fn.simpleLightbox=function(c){c=b.extend({overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",close:!0,closeText:"\u00d7",showCounter:!0,fileExt:"png|jpg|jpeg|gif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,disableRightClick:!1,disableScroll:!0,
alertError:!0,alertErrorMessage:"Image not found, next image will be loaded"},c);var l=0,q=b(),m=function(){var a=g.body||g.documentElement,a=a.style;return""==a.WebkitTransition?"-webkit-":""==a.MozTransition?"-moz-":""==a.OTransition?"-o-":""==a.transition?"":!1},t=!1,d=b(this.selector,this.context),m=m(),u=!1!==m?!0:!1,D=b("<div>").addClass("sl-overlay"),L=b("<button>").addClass("sl-close").html(c.closeText),y=b("<div>").addClass("sl-spinner").html("<div></div>"),E=b("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+
c.navText[0]+'</button><button class="sl-next">'+c.navText[1]+"</button>"),A=b("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),n=!1,e=0,z=b(),M=b("<div>").addClass("sl-caption pos-"+c.captionPosition),p=b("<div>").addClass("sl-wrapper").addClass(c.className).html('<div class="sl-image"></div>'),H=function(a){a.trigger(b.Event("show.simplelightbox"));c.disableScroll&&F("hide");p.appendTo("body");c.overlay&&D.appendTo(b("body"));n=!0;e=d.index(a);
q=b("<img/>").hide().attr("src",a.attr("href"));b(".sl-image").html("").attr("style","");q.appendTo(b(".sl-image"));D.fadeIn("fast");b(".sl-close").fadeIn("fast");y.show();E.fadeIn("fast");b(".sl-wrapper .sl-counter .sl-current").text(e+1);A.fadeIn("fast");B();c.preloading&&G();setTimeout(function(){a.trigger(b.Event("shown.simplelightbox"))},c.animationSpeed)},B=function(a){if(q.length){var f=new Image,g=b(r).width()*c.widthRatio,l=b(r).height()*c.heightRatio;f.src=q.attr("src");b(f).bind("error",
function(f){d.eq(e).trigger(b.Event("error.simplelightbox"));n=!1;c.alertError&&alert(c.alertErrorMessage);1==a||-1==a?h(a):h(1)});f.onload=function(){"undefined"!==typeof a&&d.eq(e).trigger(b.Event("changed.simplelightbox")).trigger(b.Event((1===a?"nextDone":"prevDone")+".simplelightbox"));var k=f.width,h=f.height;if(k>g||h>l)var m=k/h>g/l?k/g:h/l,k=k/m,h=h/m;b(".sl-image").css({top:(b(r).height()-h)/2+"px",left:(b(r).width()-k)/2+"px"});y.hide();q.css({width:k+"px",height:h+"px"}).fadeIn("fast");
t=!0;var k="self"==c.captionSelector?d.eq(e):d.eq(e).find(c.captionSelector),p="data"==c.captionType?k.data(c.captionsData):"text"==c.captionType?k.html():k.prop(c.captionsData);c.loop||(0==e&&b(".sl-prev").hide(),e>=d.length-1&&b(".sl-next").hide(),0<e&&e<d.length-1&&b(".sl-prev, .sl-next").show());1==d.length&&b(".sl-prev, .sl-next").hide();1==a||-1==a?(k={opacity:1},c.animationSlide&&(u?(v(0,100*a+"px"),setTimeout(function(){v(c.animationSpeed/1E3,"0px");50})):k.left=parseInt(b(".sl-image").css("left"))+
100*a+"px"),b(".sl-image").animate(k,c.animationSpeed,function(){n=!1;I(p)})):(n=!1,I(p))}}},I=function(a){""!=a&&"undefined"!==typeof a&&c.captions&&M.html(a).hide().appendTo(b(".sl-image")).delay(c.captionDelay).fadeIn("fast")},v=function(a,c){var d={};d[m+"transform"]="translateX("+c+")";d[m+"transition"]=m+"transform "+a+"s linear";b(".sl-image").css(d)},G=function(){var a=0>e+1?d.length-1:e+1>=d.length-1?0:e+1,c=0>e-1?d.length-1:e-1>=d.length-1?0:e-1;b("<img />").attr("src",d.eq(a).attr("href")).load(function(){d.eq(e).trigger(b.Event("nextImageLoaded.simplelightbox"))});
b("<img />").attr("src",d.eq(c).attr("href")).load(function(){d.eq(e).trigger(b.Event("prevImageLoaded.simplelightbox"))})},h=function(a){d.eq(e).trigger(b.Event("change.simplelightbox")).trigger(b.Event((1===a?"next":"prev")+".simplelightbox"));y.show();var f=e+a;n||(0>f||f>=d.length)&&0==c.loop||(e=0>f?d.length-1:f>d.length-1?0:f,b(".sl-wrapper .sl-counter .sl-current").text(e+1),f={opacity:0},c.animationSlide&&(u?v(c.animationSpeed/1E3,-100*a-l+"px"):f.left=parseInt(b(".sl-image").css("left"))+
-100*a+"px"),b(".sl-image").animate(f,c.animationSpeed,function(){setTimeout(function(){var f=d.eq(e);q.attr("src",f.attr("href"));b(".sl-caption").remove();B(a);c.preloading&&G()},100)}))},w=function(){if(!n){var a=d.eq(e),f=!1;a.trigger(b.Event("close.simplelightbox"));b(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){c.disableScroll&&F("show");b(".sl-wrapper, .sl-overlay").remove();f||a.trigger(b.Event("closed.simplelightbox"));
f=!0});q=b();n=t=!1}},F=function(a){if("hide"==a){if(a=r.innerWidth,a||(a=g.documentElement.getBoundingClientRect(),a=a.right-Math.abs(a.left)),g.body.clientWidth<a){a=g.createElement("div");var c=parseInt(b("body").css("padding-right"),10);a.className="sl-scrollbar-measure";b("body").append(a);var d=a.offsetWidth-a.clientWidth;b(g.body)[0].removeChild(a);b("body").data("padding",c);0<d&&b("body").css({"padding-right":c+d,overflow:"hidden"})}}else b("body").css({"padding-right":b("body").data("padding"),
overflow:"auto"})},z=b(".sl-image");c.close&&L.appendTo(p);c.showCounter&&1<d.length&&(A.appendTo(p),A.find(".sl-total").text(d.length));c.nav&&E.appendTo(p);c.spinner&&y.appendTo(p);b(r).on("resize",B);d.on("click.simplelb",function(a){var d;d=c.fileExt?"a"==b(this).prop("tagName").toLowerCase()&&(new RegExp(".("+c.fileExt+")$","i")).test(b(this).attr("href")):!0;if(d){a.preventDefault();if(n)return!1;H(b(this))}});b(g).on("click",".sl-close",function(a){a.preventDefault();t&&w()});b(g).click(function(a){t&&
c.docClose&&0==b(a.target).closest(".sl-image").length&&0==b(a.target).closest(".sl-navigation").length&&w()});if(c.disableRightClick)b(g).on("contextmenu",".sl-image img",function(a){return!1});b(g).on("click",".sl-navigation button",function(a){a.preventDefault();l=0;h(b(this).hasClass("sl-next")?1:-1)});if(c.enableKeyboard)b(g).on("keyup.simplelb",function(a){a.preventDefault();l=0;if(t){var b=a.keyCode;27==b&&w();37!=b&&39!=a.keyCode||h(39==a.keyCode?1:-1)}});var J=0,K=0,x=!1,C=0;b(g).on("touchstart mousedown pointerdown MSPointerDown",
".sl-image",function(a){if(x)return!0;u&&(C=parseInt(z.css("left")));x=!0;J=a.originalEvent.pageX||a.originalEvent.touches[0].pageX;return!1}).on("touchmove mousemove pointermove MSPointerMove",function(a){if(!x)return!0;a.preventDefault();K=a.originalEvent.pageX||a.originalEvent.touches[0].pageX;l=J-K;c.animationSlide&&(u?v(0,-l+"px"):z.css("left",C-l+"px"))}).on("touchend mouseup touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(a){x&&(x=!1,Math.abs(l)>c.swipeTolerance?h(0<
l?1:-1):c.animationSlide&&(u?v(c.animationSpeed/1E3,"0px"):z.animate({left:C+"px"},c.animationSpeed/2)))});this.open=function(a){a=a||b(this[0]);H(a)};this.next=function(){h(1)};this.prev=function(){h(-1)};this.close=function(){w()};this.destroy=function(){b(g).unbind("click.simplelb").unbind("keyup.simplelb");w();b(".sl-overlay, .sl-wrapper").remove()};return this}})(jQuery,window,document);